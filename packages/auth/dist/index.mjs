import r,{useState as e,useContext as n}from"react";import{useHistory as o}from"react-router-dom";var t=r.createContext({}),i=function(n){var i=n.children,u=n.forbiddenPath;void 0===u&&(u="/forbidden");var c=n.client;void 0===c&&(c={login:function(r){return Promise.resolve()},register:function(r){return Promise.resolve()},getUserInfo:function(r){return Promise.resolve({id:1,name:"Mock"})},logout:function(r){return Promise.resolve()}});var s=e(),f=s[0],l=s[1],a=o(),v=Object.assign({},{user:f,onForbidden:function(){return a.push(u)}},c,{login:function(){try{return Promise.resolve(c.login()).then(function(){return Promise.resolve(c.getUserInfo()).then(function(r){l(r)})})}catch(r){return Promise.reject(r)}},logout:function(){try{return Promise.resolve(c.logout()).then(function(){l(null)})}catch(r){return Promise.reject(r)}}});return r.createElement(t.Provider,{value:v},i)},u=function(){var r=n(t);if(!r)throw new Error("useAuth should be use in side auth context");return r},c=function(r){var e=u(),n=e.onForbidden;e.user||(r?r():n())};export{i as AuthProvider,u as useAuth,c as useAuthenticated};
//# sourceMappingURL=index.mjs.map
