!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("react-router-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-router-dom"],r):r(e.auth={},e.react,e.reactRouterDom)}(this,function(e,r,t){var n="default"in r?r.default:r,o=n.createContext({}),u=function(){var e=r.useContext(o);if(!e)throw new Error("useAuth should be use in side auth context");return e};e.AuthProvider=function(e){var u=e.children,i=e.forbiddenPath;void 0===i&&(i="/forbidden");var s=e.client;void 0===s&&(s={login:function(e){return Promise.resolve()},register:function(e){return Promise.resolve()},getUserInfo:function(e){return Promise.resolve({id:1,name:"Mock"})},logout:function(e){return Promise.resolve()}});var c=r.useState(),f=c[0],d=c[1],a=t.useHistory(),l=Object.assign({},{user:f,onForbidden:function(){return a.push(i)}},s,{login:function(){try{return Promise.resolve(s.login()).then(function(){return Promise.resolve(s.getUserInfo()).then(function(e){d(e)})})}catch(e){return Promise.reject(e)}},logout:function(){try{return Promise.resolve(s.logout()).then(function(){d(null)})}catch(e){return Promise.reject(e)}}});return n.createElement(o.Provider,{value:l},u)},e.useAuth=u,e.useAuthenticated=function(e){var r=u(),t=r.onForbidden;r.user||(e?e():t())}});
//# sourceMappingURL=index.umd.js.map
