{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState, useContext } from 'react'\nimport {\n  useHistory\n} from 'react-router-dom'\n/**\n * @typedef UserInfoType\n * @type {object}\n * @property {string | number} id - an ID.\n * @property {string} name - your name.\n * @property {string} profileImage - profile image.\n */\n\n/**\n * @typedef AuthContextType\n * @type {object}\n * @property {UserInfoType} [user]\n * @property {Function} [onForbidden]\n */\n\n/**\n * @type {React.Context<AuthContextType>}\n */\nconst Context = React.createContext({});\nconst AuthProvider = ({\n  children,\n  forbiddenPath = '/forbidden'\n}) => {\n  /**\n   * @type [UserInfoType, React.Dispatch<UserInfoType>]\n   */\n  const [user, setuser] = useState()\n  // const history = useHistory()\n  const history = useHistory()\n  const contextValue = {\n    user,\n    onForbidden: () => history.push(forbiddenPath),\n    login: () => setuser({\n      id: 1,\n      name: 'jump',\n      profileImage: 'https://i.pravatar.cc/300'\n    })\n  }\n  return (\n    <Context.Provider value={contextValue}>\n      {children}\n    </Context.Provider>\n  )\n}\n\nconst useAuth = () => {\n  const context = useContext(Context)\n  if (!context) {\n    throw new Error('useAuth should be use in side auth context')\n  }\n  return context;\n}\n/**\n * \n * @param {function} forbiddenCb \n */\nconst useAuthenticated = (forbiddenCb) => {\n  const {\n    user,\n    onForbidden\n  } = useAuth()\n  if (!user) {\n    forbiddenCb ? forbiddenCb() : onForbidden()\n  }\n}\nexport default {\n  AuthProvider,\n  useAuth,\n  useAuthenticated\n}\n"],"names":["Context","React","createContext","useAuth","context","useContext","Error","ref","useState","history","useHistory","Provider","value","user","onForbidden","push","forbiddenPath","login","setuser","id","name","profileImage","children","forbiddenCb"],"mappings":"uSAsBMA,EAAUC,EAAMC,cAAc,IA2B9BC,iBACEC,EAAUC,aAAWL,OACtBI,QACG,IAAIE,MAAM,qDAEXF,SAeM,uBA9COG,qDAEJ,oBAKQC,2BAElBC,EAAUC,sBAWdT,gBAACD,EAAQW,UAASC,MAVC,MACnBC,EACAC,8BAAmBL,EAAQM,KAAKC,IAChCC,wBAAaC,EAAQ,CACnBC,GAAI,EACJC,KAAM,OACNC,aAAc,iCAKbC,YA2BLnB,4BAXwBoB,SAIpBpB,6BAEFoB,EAAcA,IAAgBT"}