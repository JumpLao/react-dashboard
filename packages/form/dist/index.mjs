import{object as e}from"yup";import{useDeepCompareEffect as t}from"react-use";import r,{FormContext as n,useFormContext as a}from"react-hook-form";import o from"lodash";import l,{useEffect as i,useState as c}from"react";import{Form as u,Button as v,Input as m}from"antd";var s=function(a){var o=a.children,i=a.onSubmit,c=a.defaultValues;void 0===c&&(c={});var v=a.validationSchema;void 0===v&&(v=e({})),t(function(){console.log("default value change");var e=m.getValues();return Object.keys(e).forEach(function(e){try{m.setValue(e,c[e])}catch(e){throw console.log(e),e}}),function(){}},[c]);var m=r({defaultValues:c,validationSchema:v});return l.createElement(n,m,l.createElement(u,{onSubmit:m.handleSubmit(function(e,t){i(e)})},o))},f=function(e){var t,r=e.name;void 0===r&&(r=void 0);var n=e.label;void 0===n&&(n=void 0);var v=e.colon;void 0===v&&(v=!1);var m=e.valueKey;void 0===m&&(m="value");var s=e.changeEvent;void 0===s&&(s="onChange");var f=e.eventValueGetter;void 0===f&&(f=function(e){return e.target.value});var p=e.children,d=e.formItemLayout;void 0===d&&(d={labelAlign:"right",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}});var b=e.onValueChange;void 0===b&&(b=function(e){});var g,h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}(e,["name","label","colon","valueKey","changeEvent","eventValueGetter","children","formItemLayout","onValueChange"]),O=a(),y=O.register,E=O.unregister,j=O.setValue,V=O.errors,x=O.getValues,I=c(""),S=I[0],w=I[1];i(function(){return r?(console.log("register field",r),y({name:r}),function(){return E(r)}):function(){}},[y,r,E]),i(function(){var e=o.get(V,r);return e&&w(e.message),function(){w("")}},[V,r]),S&&(g="error");var C=o.get(x(),r),k=Object.assign({},h,((t={})[s]=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=f.apply(void 0,e);console.log("update field",r,n),j(r,n),b(n)},t[m]=C,t));return l.createElement(u.Item,Object.assign({},d,{colon:v,hasFeedback:!1,label:n,validateStatus:g,help:S,required:!1}),l.Children.map(p,function(e,t){return l.cloneElement(e,Object.assign({},{key:t},k))}))},p=function(e){var t=e.label;void 0===t&&(t="Submit");var r=e.formItemOptions;void 0===r&&(r={});var n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}(e,["label","formItemOptions"]);return l.createElement(f,r,l.createElement(v,Object.assign({},{htmlType:"submit"},n),t))},d=function(e){var t=e.name,r=e.label,n=e.formItemOptions;void 0===n&&(n={});var a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}(e,["name","label","formItemOptions"]);return l.createElement(f,Object.assign({},{name:t,label:r},n),l.createElement(m.TextArea,a))},b=function(e){var t=e.name,r=e.label,n=e.type;void 0===n&&(n="text");var a=e.formItemOptions;void 0===a&&(a={});var o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}(e,["name","label","type","formItemOptions"]);return l.createElement(f,Object.assign({},{name:t,label:r},a),l.createElement(m,Object.assign({},{type:n},o)))};export{s as Form,f as InputWrapper,p as SubmitButton,d as TextAreaInput,b as TextInput};
//# sourceMappingURL=index.mjs.map
